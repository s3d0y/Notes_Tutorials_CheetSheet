см. ACL

Бывают ситуации, когда доступ нужно настроить более тонко — нескольким пользователям или группам выдать специфичные права. Тут на помощь приходят **ACL** — расширенные списки доступа.

ACL рекомендуется использовать только в тех случаях, когда стандартными методами неудобно настраивать доступ, т. к. расширенные списки немного замедляют работу файловой системы и могут некорректно работать вместе с некоторыми программами. Это нужно всегда иметь это ввиду и отдельно проверять работу с различными программами.

```
$ sudo apt install acl
```


Для настройки правил ACL нужно использовать команду setfacl:

```
$ setfacl -m <категория>:<имя пользователя>:<права доступа> <путь к файлу>
```

-m — означает modify и используется, когда нужно изменить права.

Категории здесь следующие:

- u (user) — пользователь;
- g (group) — группа;
- o (other) — остальные.

Например, вы хотите, чтобы пользователи user1 и user2 получили доступ только на чтение и запись файла file1. Запишите команду следующим образом:

```
$ setfacl -m u:user1:rw,u:user2:rw file1
```

В результате вы получите следующий ACL:

```
$ getfacl file1
# file: file1
# owner: root
# group: root
user::rw-
user:user1:rw-
user:user2:rw-
group::r--
mask::-w-
other::r–
```

И так выглядят права при выводе ls -l:

```
$ ls -l
total 0
-rw-r-xr--+ 1 root group1 0 Apr 12 09:46 file1
```

Добавился знак «+» после списка прав — это означает, что применен ACL. Подобные действия вы можете выполнять и для групп:

```
$ setfacl -m g:group1:r file1
```

```
$ getfacl file1
# file: file1
# owner: root
# group: root
user::rw-
group::r--
group:group1:r--
mask::r--
other::r–
```

Для того, чтобы удалить какие-то правила из ACL или весь ACL с файла полностью, также используется команда setfacl, но с другими опциями:

- setfacl -x — удаляет конкретное правило;
- setfacl -b — удаляет ACL с файла целиком, после этого значок «+» пропадет из списка прав.