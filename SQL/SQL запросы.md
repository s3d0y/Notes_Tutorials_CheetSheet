#  Курс по SQL запросам

https://stepik.org/course/63054/promo?auth=login


**Рекомендуемый алгоритм успешного прохождения каждого шага курса**

1.  **Прочитайте текстовый материал**, он достаточно короткий и всегда имеет всю необходимую информацию для выполнения практического задания.
2.  Eсли по тексту теории встречаются **примеры** - скопируйте и вставьте их в окно кода, **запустите** запрос, не отправляя на проверку (нажать черную кнопку **Запустить код).** Проанализируйте результат, если он (результат) является неожиданным или не понятным - еще раз вернитесь к теории и еще раз ее прочитайте.
3.  Теперь можно приступать к выполнению практического задания. Прежде всего внимательно **прочитайте формулировку**, разберитесь, что именно нужно сделать (без этого совершенно нет смысла писать код SQL);
4.  Если задание понятно - можно приступать к **реализации запроса**, тут два варианта - либо Вы **полностью напишете запрос на SQL**, либо поищите среди примеров похожий, **скопируйте его и начинайте его корректировать** (скорее всего, когда пройдете десяток шагов, вариант с копированием отпадет, как ненужный).
5.  Отправьте запрос на проверку.  Результата может быть два - либо запрос написан **верно,** и он проходит - можно переходить к следующему шагу. Либо запрос система не пропускает, в нем **допущена ошибка**, но "кто не ошибается, тот ничего и не делает...", **ошибки** это **обязательный** и **полезный элемент** в процессе обучения;
6.  Начинайте **отлаживать** (исправлять) запрос, причем если Вам удастся это сделать **самостоятельно** - значит Вы  действительно разобрались с материалом шага, можно переходить к следующему. Если же ошибки исправить не удается,  не спешите паниковать, читать и писать комментарии, лезть в Интернет - просто в**ернитесь к 1 или 2-му пункту** этого алгоритма.
7.  Если же все-таки теория и примеры не помогают, воспользуйтесь **памяткой о типичных ошибках и способах их исправления** (приведена ниже),  примерно половина ошибок связана с описанными в ней пунктами и, привыкнув каждый раз проверять свой запрос, Вы сбережете себе много часов и нервов (проверено на опыте).
8.  Когда Вы напишете правильный запрос, его можно **опубликовать в решениях**, посмотреть решения других студентов и обсудить свое.
9.  В комментариях можно **давать подсказки** или делиться тем, что вызвало у Вас наибольшие трудности, только без спойлеров!
10.  Очень полезно прочитать вопрос другого обучающегося и, **если Вы точно знаете ответ**, самостоятельно **ответить** на его вопрос - это еще один способ закрепления материала, причем очень действенный (тоже проверено на опыте).
11.  После выполнения заданий каждого модуля, Вы будете получать ссылку на **текстовый конспект** этого модуля, по которому удобно ориентироваться по пройденному материалу.

**Памятка о типичных ошибках и способах их исправления**

Эта памятка написана, чтобы помочь Вам **самостоятельно находить ошибки в своих запросах**. Если ваш запрос не принимается системой, то возвращайтесь на эту страничку и пройдитесь по всем пунктам:

1. Приведите синтаксис запроса к общепринятому:

-   если у вас есть время, стоит изучить руководство по стилю SQL [https://www.sqlstyle.guide/ru/](https://www.sqlstyle.guide/ru/)
-   можете отформатировать ваш запрос с помощью, например, [https://codebeautify.org/sqlformatter](https://codebeautify.org/sqlformatter)
-   в любом случае, информации и примеров в курсе достаточно для того, чтобы писать запросы корректно.

2. Проверьте, что ключевые слова, названия столбцов и значения в ячейках, которые необходимо найти, написаны правильно. Особенно обратите внимание, чтобы в русских названиях столбцов не было английских букв.

3. Проверьте, что:

-   количество открывающихся скобок равно количеству закрывающихся;
-   запятые разделяют перечисление столбцов, но не ключевые слова;
-   запросы разделяются точкой с запятой.

4. Проверьте, что последовательность команд указана верно (она отличается от последовательности выполнения команд в запросе):

```
SELECT 'столбцы или * для выбора всех столбцов; обязательно'

FROM 'таблица; обязательно'

WHERE 'условие/фильтрация, например, city = 'Moscow'; необязательно'

GROUP BY 'столбец, по которому хотим сгруппировать данные; необязательно'

HAVING 'условие/фильтрация на уровне сгруппированных данных; необязательно'

ORDER BY 'столбец, по которому хотим отсортировать вывод; необязательно'
```

5.  Если запрос включает подзапросы, выполните сначала подзапросы и удостоверьтесь, что получаете ожидаемый результат.

6. **Прочитайте комментарии под заданием**: большинство трудностей уже обсуждалось не один раз.


Виды типов данных
```
Int / Integer -  целые числа 
varchar(x) - строка, где х число возможных символов
decimal(x,y)/numeric(x,y) - вещественные (дроби), где (x,y) - количество символов до и после запятой 
date - дата в формате гггг-мм-дд
```
Операторы 
	CREATE TABLE *имя таблицы* (
		название поля и его описание которые включает в себя тип поля и другие необязательные характеристики, 
		название поля ... 
	);

INT PRIMARY KEY AUTO_INCREMENT  - три команды. "Целое" "Первичный ключ" "авто увеличение при добавление строки"

SELECT *   -  выбрать звездочка = все
FROM genre - Из Имя таблицы

INSERT INTO таблица(поле1, поле2)
VALUES (значение1, значение2);
КАЖДАЯ СТРОКА - добавляется отдельно 
- ключевые слова `INSERT INTO` (ключевое слово `INTO` можно пропустить);
- имя таблицы, в которую добавляется запись;
- открывающая круглая скобка «(»;
-  список полей через запятую, в которые следует занести новые данные;
- закрывающая скобка «)»;
- ключевое слово `VALUES`;
- открывающая круглая скобка «(»;
- список значений через запятую, которые заносятся в соответствующие поля, при этом текстовые значения заключаются в кавычки, числовые значения записываются без кавычек, в качестве разделителя целой и дробной части используется точка;
- закрывающая скобка «)».


```
 /* и */  - это комментарий
 ```

AS - как  
- ключевое слово `**SELECT**` ; 
- имя столбца;
- ключевое слово `**AS**` ; 
- новое название столбца (можно русскими буквами), выводимое в результате запроса, но это должно быть одно слово, если название состоит из двух слов – соединяйте их подчеркиванием, например, `**Количество_книг**`; 
- запятая; 
- имя столбца; 
- .... 
- ключевое слово `**FROM**` ; 
- имя таблицы.

Так же можно создавать вычисляемый столбец  - price * amount AS total

Математические функции - 

|**Функция**|**Описание**|**Пример**|
|---|---|---|
|`CEILING(x)`|возвращает наименьшее целое число, большее или равное **x**  <br>(округляет до целого числа в большую сторону)|`CEILING(4.2)=5   CEILING(-5.8)=-5`|
|`ROUND(x, k)`|округляет значение **x** до **k** знаков после запятой,  <br>если **k** не указано – **x** округляется до целого|`ROUND(4.361)=4   ROUND(5.86592,1)=5.9`|
|`FLOOR(x)`|возвращает наибольшее целое число, меньшее или равное **x**  <br>(округляет до  целого числа в меньшую сторону)|`FLOOR(4.2)=4   FLOOR(-5.8)=-6`|
|`POWER(x, y)`|возведение **x** в степень **y**|`POWER(3,4)=81.0`|
|`SQRT(x)`|квадратный корень из **x**|`SQRT(4)=2.0   SQRT(2)=1.41...`|
|`DEGREES(x)`|конвертирует значение **x** из радиан в градусы|`DEGREES(3) = 171.8...`|
|`RADIANS(x)`|конвертирует значение **x** из градусов в радианы|`RADIANS(180)=3.14...`|
|`ABS(x)`|модуль числа **x**|`ABS(-1) = 1   ABS(1) = 1`|
|`PI()`|pi = 3.1415926...||


IF(логическое_выражение, выражение_1, выражение_2) 

Функция вычисляет `логическое_выражение,` если оно истина – в поле заносится значение `выражения_1`, в противном случае –  значение `выражения_2.` Все три параметра `IF()` являются обязательными.

Допускается использование вложенных функций, вместо `выражения_1` или `выражения_2` может стоять новая функция `**IF**`.

WHERE price < 600;  - уссловие - "ГДЕ"

Логическое выражение может включать **операторы сравнения** (равно «**=**», не равно «**<>**», больше «**>**», меньше «**<**», больше или равно«**>=**», меньше или равно «**<=**») и выражения, допустимые в SQL.

 Логическое выражение после ключевого слова `WHERE` кроме операторов сравнения  и выражений может включать  **логические операции** (И «**and**», ИЛИ «**or**», НЕ «**not**») и круглые скобки, изменяющие приоритеты выполнения операций.

Приоритеты операций:

1. круглые скобки
2. умножение  (*),  деление (/)
3. сложение  (+), вычитание (-)
4. операторы сравнения (=, >, <, >=, <=, <>)
5. NOT
6. AND
7. OR

 Выборка данных, операторы BETWEEN, IN

 Логическое выражение после ключевого слова `WHERE` может включать операторы  **`BETWEEN`** и **`IN`**. Приоритет  у этих операторов такой же как у операторов сравнения, то есть они выполняются раньше, чем `**NOT**`, `**AND**,` `**OR**`.

Оператор `BETWEEN` позволяет отобрать данные, относящиеся к некоторому интервалу, включая его границы.

Сортировка - ORDER BY столбец по которому сортируем asc или desc, ... еще одна сортировка

 **asc** от ascending - возрастающий и соответственно **desc** от descending - убывающий

Возрастание / убывание

ПОРЯДОК НАПИСАНИЯ  ПОРЯДОК ВЫПОЛНЕНИЯ ЗАПРОСА 





 