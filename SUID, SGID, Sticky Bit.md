Специальные биты разрешений SUID, SGID и Sticky Bit применяются довольно редко и чаще для системных файлов. Но в этом разделе мы изучим такую функциональность, так как при неаккуратном обращении с ним можно по ошибке раздать права root.

## Знакомство с SUID

По умолчанию при запуске программы процесс происходит с правами пользователя, который его инициировал. И не всегда этих прав хватает для полноценной работы с программой.

**SUID** — это параметр безопасности, благодаря которому можно разрешить пользователям запускать программу от имени владельца. При условии, что права на выполнение выданы изначально. Но SUID не работает для bash-скриптов — это нужно всегда помнить.

Для выдачи таких прав нужно выполнить следующую команду (выдается именно для владельца):

```
chmod u+s <путь к файлу>
```

Если выдать такие права файлу, у владельца которого еще нет права на выполнение, то на месте, где должны отображаться эти права будет, символ «S», обозначающий, что SUID настроен, но не применен. После того, как права на выполнение будут даны, обозначение сменится на «s»:

```
$ ls -l
total 0
-rw-r--r--+ 1 root root 0 Apr 12 09:46 file1
```

```
$ chmod u+s file1
```

```
$ ls -l
total 0
-rwSr--r--+ 1 root root 0 Apr 12 09:46 file1
```

```
$ chmod u+x file1
```

```
$ ls -l
total 0
-rwsr--r--+ 1 root root 0 Apr 12 09:46 file1
```

## Знакомство с SGID

**SGID** — это параметр безопасности, благодаря которому можно разрешить пользователям запускать файл от имени владельца группы файла. При условии, что права на выполнение выданы изначально.

Также благодаря этому параметру безопасности группа для новых файлов в каталоге будет та же, что и у каталога.

Для выдачи таких прав нужно выполнить следующую команду:

```
chmod g+s <путь к файлу>
```

Аналогично, как и с пользователем: будет «S» на месте прав выполнения, если этих прав не было, и «s», если эти права были:

```
$ ls -l
total 0
-rwxr-xr--+ 1 root root 0 Apr 12 09:46 file1
```

```
$ chmod g+s file1
```

```
$ ls -l
total 0
-rwxr-sr--+ 1 root root 0 Apr 12 09:46 file1
```

## Знакомство с Sticky Bit

**Sticky Bit** — еще одно специальное разрешение, благодаря которому файлы в каталоге, которому выставлен этот бит разрешения, могут быть удалены только их владельцами или владельцами каталога, где лежит этот файл. Кроме того, Sticky Bit можно применить непосредственно к файлу.

И по традиции: чтобы этот параметр безопасности заработал, нужно, чтобы у категории пользователей «остальные» были права на выполнение. После назначения Sticky Bit обозначение «x» меняется на «t», а если прав на выполнение не было, то будет символ «T», обозначающий, что Sticky Bit настроен, но не применен.

Установить Sticky Bit можно следующим образом:

```
chmod +t <путь к файлу>
```

Рассмотрим пример:

```
$ ls -l
total 4
drwxr-xr-x 2 user1 user1 4096 Apr 13 13:47 test
```

```
$ chmod +t test
```

```
$ ls -l
total 4
drwxr-xr-t 2 user1 user1 4096 Apr 13 13:47 test
```

Пояснение: для каталога test мы добавили Sticky Bit (в ls -l видим, что добавился символ «t» в списке прав). Теперь файлы в этом каталоге могут удалить только их владельцы.