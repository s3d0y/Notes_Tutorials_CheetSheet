
Команда `sudo -i` (short for `--login`) эмулирует **полный процесс входа в систему** для целевого пользователя (по умолчанию — root). Это означает:

1. **Смена переменных окружения:** Она загружает профили целевого пользователя (`.profile`, `.bashrc`, `.login` и т.д.), как если бы вы вошли в систему напрямую.
    
2. **Смена домашнего каталога:** Рабочий каталог меняется на домашний каталог целевого пользователя (например, `/root` для root).
    
3. **Новая оболочка (Shell):** Запускается новая интерактивная оболочка, указанная для целевого пользователя.

### Аналогия

Представьте, что у вас открыт терминал на вашем рабочем столе (это ваша текущая сессия пользователя `ivan`). Когда вы выполняете `sudo -i`, вы как бы открываете **новую вкладку** в этом терминале, но эта вкладка сразу залогинена под пользователем `root`. Ваша исходная вкладка (сессия `ivan`) остается активной и ждет, когда вы в нее вернетесь.

### Сценарии и их последствия

#### Сценарий 1: Выполнение в терминале

Вы вошли как пользователь `ivan` и в своем терминале выполняете:

``` bash
ivan@server:~$ whoami
ivan
ivan@server:~$ pwd
/home/ivan

ivan@server:~$ sudo -i
root@server:~# whoami
root
root@server:~# pwd
/root
```
**Что происходит?**

- Ваша сессия `ivan` остается активной.
- Поверх нее запускается новая дочерняя оболочка с правами `root`.
- Когда вы выйдете из сессии root (командой `exit` или `logout`), вы вернетесь обратно в сессию пользователя `ivan`.

``` text
root@server:~# exit
logout
ivan@server:~$ whoami
ivan
```

**Вывод: Текущий пользователь НЕ разлогинен.**

---
#### Сценарий 2: Запуск через `exec`

Если же вы выполните команду с `exec`, то это кардинально меняет поведение:


```bash
ivan@server:~$ exec sudo -i
root@server:~#
```

**Что происходит?**

- Команда `exec` говорит системе: "Замени текущий процесс (мою оболочку `ivan`) на этот новый процесс (`sudo -i`)".
- Сессия пользователя `ivan` завершается, и ее место полностью занимает сессия `root`.
- Когда вы выйдете из-под root, терминал закроется или вы вернетесь на уровень выше (например, к графическому экрану входа, если вы так вошли).

**Вывод: Текущий пользователь РАЗЛОГИНЕН (его сессия оболочки заменена).**

| Команда        | Эффект                                                               | Сессия текущего пользователя              |
| -------------- | -------------------------------------------------------------------- | ----------------------------------------- |
| `sudo -i`      | **Полный логин** для root. Меняет окружение и каталог.               | **Активна** (запускает дочернюю оболочку) |
| `sudo -s`      | **"Быстрый" root shell.** Сохраняет окружение текущего пользователя. | **Активна** (запускает дочернюю оболочку) |
| `sudo su -`    | Аналог `sudo -i`. Полный логин для root.                             | **Активна** (запускает дочернюю оболочку) |
| `su -`         | Переключение на root, но **требует пароль root**.                    | **Активна** (запускает дочернюю оболочку) |
| `exec sudo -i` | **Заменяет** текущую сессию на сессию root.                          | **Завершена** (процесс заменен)           |
| `login`        | Запускает **новый системный логин**, завершая текущую сессию.        | **Завершена**                             |